---
title: Plugin Architecture
description: Understanding Ralph TUI's plugin system for agent and tracker integrations.
---

## Plugin Architecture

Ralph TUI uses a plugin system to support multiple AI agents and task trackers. This modular design lets you choose the tools that best fit your workflow.

<Callout type="info">
Plugins are independent - any agent can work with any tracker. Use Claude Code with Beads, or OpenCode with prd.json, or any combination.
</Callout>

## Two Plugin Types

Ralph TUI has two categories of plugins:

### Agent Plugins

Agent plugins connect to AI coding assistants that execute tasks. They handle:

- Detecting if the agent CLI is installed
- Building command-line arguments from prompts
- Streaming output in real-time
- Managing execution lifecycle (start, interrupt, timeout)
- Model selection and configuration

**Built-in agents:**
- **[Claude Code](/docs/plugins/agents/claude)** - Anthropic's Claude CLI with subagent tracing
- **[OpenCode](/docs/plugins/agents/opencode)** - Open-source multi-provider agent with subagent tracing
- **[Factory Droid](/docs/plugins/agents/droid)** - Factory Droid CLI (no subagent tracing)
- **[Gemini CLI](/docs/plugins/agents/gemini)** - Google's Gemini CLI
- **[Codex CLI](/docs/plugins/agents/codex)** - OpenAI's Codex CLI
- **[Kiro CLI](/docs/plugins/agents/kiro)** - AWS Kiro CLI
- **[iFlow CLI](/docs/plugins/agents/iflow)** - iFlow CLI with multiple model support

### Tracker Plugins

Tracker plugins connect to task management systems. They handle:

- Fetching available tasks
- Selecting the next task (respecting priorities and dependencies)
- Updating task status (in progress, completed)
- Syncing with external systems

**Built-in trackers:**
- **[JSON](/docs/plugins/trackers/json)** - Simple prd.json file format (no dependencies)
- **[Beads](/docs/plugins/trackers/beads)** - Git-backed issue tracker with hierarchy
- **[Beads-BV](/docs/plugins/trackers/beads-bv)** - Beads with graph analysis for smart task selection

## How Plugins Work Together

```
┌─────────────────────────────────────────────────────────────────┐
│                         Ralph TUI                               │
│                                                                 │
│  ┌──────────────┐                         ┌──────────────┐     │
│  │   Tracker    │──── Get Next Task ─────▶│   Engine     │     │
│  │   Plugin     │◀─── Update Status ──────│              │     │
│  └──────────────┘                         └──────┬───────┘     │
│                                                  │              │
│                                           Build Prompt          │
│                                                  │              │
│                                                  ▼              │
│                                          ┌──────────────┐      │
│                                          │    Agent     │      │
│                                          │    Plugin    │      │
│                                          └──────────────┘      │
└─────────────────────────────────────────────────────────────────┘
```

The execution engine orchestrates plugins:

1. **Tracker** provides the next task (highest priority, no blockers)
2. **Engine** builds a prompt from task data + Handlebars template
3. **Agent** executes the prompt and streams output
4. **Engine** detects completion via `<promise>COMPLETE</promise>`
5. **Tracker** marks the task as complete
6. Repeat until no tasks remain

## Plugin Comparison

### Agents

| Feature | Claude Code | OpenCode | Factory Droid | Gemini CLI | Codex CLI | Kiro CLI | iFlow CLI |
|---------|-------------|----------|--------------|------------|-----------|----------|-----------|
| Provider | Anthropic | Multi-provider | Factory | Google | OpenAI | AWS | iFlow |
| Models | sonnet, opus, haiku | Any via provider/model format | Factory model list | gemini-2.5-pro, gemini-2.5-flash | gpt-4, gpt-4-turbo | Kiro models | glm-4.7, deepseek-v3.2, qwen3, kimi-k2, minimax-m2.1 |
| Subagent Tracing | Yes (Task tool) | Yes (Task tool) | No | Yes (stream-json) | Yes (Task tool) | Yes (agent types) | No |
| File Context | Yes (--add-dir) | Yes (--file) | No (uses `--cwd`) | No | Yes (--file) | Yes (--files) | Yes (--all-files) |
| Streaming | Yes | Yes | Yes | Yes | Yes | Yes | Yes |
| Installation | `npm i -g @anthropic-ai/claude-code` | `curl -fsSL https://opencode.ai/install \| bash` | [Factory Droid CLI](https://docs.factory.ai/reference/cli-reference) | `npm install -g @google/gemini-cli` | `npm install -g openai-codex` | `npm install -g @aws/kiro-cli` | `npm install -g iflow-cli` |

### Trackers

| Feature | JSON | Beads | Beads-BV |
|---------|------|-------|----------|
| External CLI | None | `bd` | `bd` + `bv` |
| Dependencies | Yes | Yes | Yes |
| Priority Ordering | Yes | Yes | Yes + PageRank |
| Hierarchy (Epics) | No | Yes | Yes |
| Graph Analysis | No | No | Yes |
| Git Sync | No | Yes | Yes |
| Setup Complexity | Lowest | Medium | Highest |

## Choosing Plugins

<TabsRoot defaultValue="getting-started">
  <TabsList>
    <TabsTrigger value="getting-started">Getting Started</TabsTrigger>
    <TabsTrigger value="team">Team Projects</TabsTrigger>
    <TabsTrigger value="large">Large Projects</TabsTrigger>
  </TabsList>
  <TabsContent value="getting-started">
    Start with the **JSON tracker** and **Claude Code agent**:

    ```bash
    ralph-tui run --prd ./prd.json --agent claude
    ```

    No external dependencies needed - just create a `prd.json` file and go.
  </TabsContent>
  <TabsContent value="team">
    Use **Beads tracker** for git-backed issue tracking:

    ```bash
    ralph-tui run --tracker beads --epic my-epic
    ```

    Issues sync across team members via git.
  </TabsContent>
  <TabsContent value="large">
    Use **Beads-BV tracker** for intelligent task selection:

    ```bash
    ralph-tui run --tracker beads-bv --epic my-epic
    ```

    BV uses PageRank and critical path analysis to pick tasks that unblock the most work.
  </TabsContent>
</TabsRoot>

## Configuration

### Quick Setup

Set default plugins in your config file:

```toml
# .ralph-tui/config.toml
agent = "claude"
tracker = "json"

[agentOptions]
model = "sonnet"
```

### CLI Override

Override config with CLI flags:

```bash
ralph-tui run --agent opencode --tracker beads-bv --epic my-epic
```

### Multiple Plugin Configs

Configure multiple instances for flexibility:

```toml
# Define two agents
[[agents]]
name = "claude-fast"
plugin = "claude"
[agents.options]
model = "haiku"

[[agents]]
name = "claude-smart"
plugin = "claude"
default = true
[agents.options]
model = "opus"

# Switch between them
# ralph-tui run --agent claude-fast
```

## Plugin Interface

All plugins implement standard interfaces defined in the source:

- **AgentPlugin**: `src/plugins/agents/types.ts`
- **TrackerPlugin**: `src/plugins/trackers/types.ts`

Key methods for agents:
- `detect()` - Check if CLI is available
- `execute(prompt, files, options)` - Run the agent
- `interrupt(executionId)` - Stop execution

Key methods for trackers:
- `getTasks(filter)` - Get all matching tasks
- `getNextTask(filter)` - Get highest priority ready task
- `completeTask(id, reason)` - Mark task done
- `updateTaskStatus(id, status)` - Update task state

## Next Steps

Learn about specific plugins:

- **Agents**: [Claude Code](/docs/plugins/agents/claude) | [OpenCode](/docs/plugins/agents/opencode) | [Factory Droid](/docs/plugins/agents/droid) | [Gemini CLI](/docs/plugins/agents/gemini) | [Codex CLI](/docs/plugins/agents/codex) | [Kiro CLI](/docs/plugins/agents/kiro) | [iFlow CLI](/docs/plugins/agents/iflow)
- **Trackers**: [JSON](/docs/plugins/trackers/json) | [Beads](/docs/plugins/trackers/beads) | [Beads-BV](/docs/plugins/trackers/beads-bv)
